<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Socialify - Registro</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="./Assets/CSS/style.css">
  </head>
  <body>
    <!-- Botón para regresar a la landpage -->
    <a href="index.html" class="back-button">&lt; Regresar</a>

    <!-- REGISTRO SECTION -->
    <section class="vh-100 d-flex justify-content-center align-items-center">
      <div class="card p-4 shadow-sm" style="width: 100%; max-width: 600px;">
        <h2 class="text-center mb-4">Crear Cuenta</h2>
        <form id="registroForm">
          <div class="row">
            <!-- Columna Izquierda -->
            <div class="col-md-6">
              <div class="mb-3">
                <label for="username" class="form-label">Username*</label>
                <input type="text" class="form-control" id="username" required>
              </div>
              <div class="mb-3">
                <label for="password" class="form-label">Password*</label>
                <input type="password" class="form-control" id="password" required>
              </div>
              <div class="mb-3">
                <label for="confirm-password" class="form-label">Confirmar Password*</label>
                <input type="password" class="form-control" id="confirm-password" required>
              </div>
              <div class="mb-3">
                <label for="email" class="form-label">Email*</label>
                <input type="email" class="form-control" id="email" required>
              </div>
            </div>
            <!-- Columna Derecha -->
            <div class="col-md-6">
              <div class="mb-3">
                <label for="nombre" class="form-label">Nombre*</label>
                <input type="text" class="form-control" id="nombre" required>
              </div>
              <div class="mb-3">
                <label for="apellidos" class="form-label">Apellidos</label>
                <input type="text" class="form-control" id="apellidos">
              </div>
              <div class="mb-3">
                <label for="genero" class="form-label">Género*</label>
                <select class="form-select" id="genero" required>
                  <option value="">[Seleccione]</option>
                  <option value="Hombre">Hombre</option>
                  <option value="Mujer">Mujer</option>
                  <option value="No aplica">No Aplica</option>
                  <option value="Prefiero no decirlo">Prefiero no Decirlo</option>
                  <option value="Otro">Otro</option>
                </select>
                <input type="text" class="form-control mt-2" id="genero-especifico" placeholder="Especifique" style="display: none;">
              </div>
              <div class="mb-3">
                <label for="fecha-nacimiento" class="form-label">Fecha de Nacimiento*</label>
                <input type="date" class="form-control" id="fecha-nacimiento" required>
              </div>
            </div>
          </div>
          <button type="submit" class="btn btn-brand w-100">Registrarse</button>
          <div class="text-center mt-3">
            <a href="login.html">¿Ya tienes cuenta? Inicia sesión</a>
          </div>
        </form>
      </div>
    </section>

    <!-- jQuery y Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Validaciones con jQuery -->
    <script>
      $(document).ready(function() {
        // Mostrar input si selecciona "Otro"
        $("#genero").on("change", function() {
          if ($(this).val() === "Otro") {
            $("#genero-especifico").show().attr("required", true);
          } else {
            $("#genero-especifico").hide().val("").removeAttr("required");
          }
        });

        // Validación del formulario
        $("#registroForm").on("submit", function(event) {
          event.preventDefault();
          
          let password = $("#password").val();
          let confirmPassword = $("#confirm-password").val();
          let email = $("#email").val().trim();
          let fechaNacimiento = $("#fecha-nacimiento").val();
          
          // Verificar coincidencia de passwords
          if (password !== confirmPassword) {
            alert("Las contraseñas no coinciden.");
            return;
          }
          
          // Validación de Email
          let emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailPattern.test(email)) {
            alert("Por favor ingresa un email válido.");
            return;
          }
          
          // Validación de fecha de nacimiento (mínimo 18 años)
          let dob = new Date(fechaNacimiento);
          let hoy = new Date();
          let edad = hoy.getFullYear() - dob.getFullYear();
          let mes = hoy.getMonth() - dob.getMonth();
          if (mes < 0 || (mes === 0 && hoy.getDate() < dob.getDate())) {
            edad--;
          }
          if (edad < 18) {
            alert("Debes tener al menos 18 años para registrarte.");
            return;
          }
          
          alert("Registro exitoso. ¡Bienvenido a Socialify!");
          window.location.href = "index.html";
        });
      });
    </script>

    <!-- Fondo Dinámico -->
    <script>
      $(document).ready(function() {
        var randomNumber = Math.floor(Math.random() * 1000);
        var imageUrl = "https://picsum.photos/1920/1080?random=" + randomNumber;
        $('body').css('background-image', 'url(' + imageUrl + ')');
      });
    </script>

    <!-- Estilos del Botón Regresar -->
    <style>
        body {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 16px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            transition: background 0.3s;
        }
        .back-button:hover {
            background: rgba(0, 0, 0, 0.8);
        }
    </style>
  </body>
</html>
